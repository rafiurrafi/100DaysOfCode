var ELEVATE=ELEVATE||{};(function($,window){ELEVATE.Landingpages=(function(options){var self=this;var disable_click_flag=false;var dragging=false;var default_options={enableHistory:true,enableHistory:768};this.options=$.extend(true,{},default_options,typeof options==='object'&&options);function saveState(url,title,html){if(this.options.enableHistory){var state={products_list:html.products_list,left_nav:html.left_nav,top_description:html.top_description,bottom_description:html.bottom_description,breadcrumbs:html.breadcrumbs,total_column:html.total_column};history.pushState(state,title,url);}}
function updateContent2(html){if(html.total_column){jQuery('.column.main').html(html.total_column).promise().done(function(){});}
if(html.left_nav){jQuery('.sidebar-main').html(html.left_nav).promise().done(function(){attachEvents();});}}
function updateContent(html){if(html.products_list){jQuery('.products-grid').replaceWith(html.products_list).promise().done(function(){});}
jQuery('.page-title span').html(html.title).promise().done(function(){});if(html.breadcrumbs){jQuery('.breadcrumbs').html(html.breadcrumbs).promise().done(function(){});}
jQuery('.category-view').html(html.top_description).promise().done(function(){});jQuery('#ev_ln_btm_description_wrapper').html(html.bottom_description).promise().done(function(){});if(html.left_nav){jQuery('.sidebar-main').html(html.left_nav).promise().done(function(){attachEvents();});}}
function init(){jQuery("body").on("touchmove",function(){dragging=true;});jQuery("body").on("touchstart",function(){dragging=false;});if(typeof(history)==='undefined'){self.options.enableHistory=false;}
if(self.options.enableHistory){var currentUrl=window.location.href;var url=new URL(currentUrl);var html_data={products_list:jQuery('.products-grid').html(),left_nav:jQuery('.sidebar-main').html(),title:jQuery('.page-title span').html(),top_description:jQuery('.category-view').html(),bottom_description:jQuery('#ev_ln_btm_description_wrapper').html(),breadcrumbs:jQuery('.breadcrumbs').html(),total_column:jQuery('.column.main').html(),};var data={html:html_data};var newUrl=url.href;saveState(newUrl,'title',data.html);window.addEventListener('popstate',function(event){try{var state=window.history.state;if(state!==null){updateContent2(state);}else{}}catch(e){if(e.code===22){console.log('Local storage capacity reached.')
var maxLength=localStorage.length,reduceBy=~~(maxLength/3);for(var i=0;i<reduceBy;i++){if(localStorage.key(0)){localStorage.removeItem(localStorage.key(0));}else break;}
if(localStorage.length<maxLength){console.log('Cache data reduced to fit new entries. ('+maxLength+' => '+localStorage.length+')');public.set(param,value);}else{console.log('Could not reduce cache size. Removing session cache setting from this instance.');public.set=function(){}}}}}.bind(this));}
attachEvents();}
function attachEvents(){jQuery('.ev_ln_filter_click').on('click touchend',function(e){if(dragging){return;}
e.preventDefault();jQuery('body').css('overflow','hidden');jQuery('html, body').animate({scrollTop:'0px'},300);jQuery('.ev_ln_filter').addClass('ev_ln_filteropen');jQuery('.ev_ln_overlay').addClass('ev_ln_overlay_open');});jQuery('.ev_ln_filter_close, .ev_ln_overlay, .ev_ln_filter .filter-panel__apply .button--full').on('click touchend',function(e){jQuery('body').css('overflow','auto');jQuery('.ev_ln_filter').removeClass('ev_ln_filteropen');jQuery('.ev_ln_overlay').removeClass('ev_ln_overlay_open');});jQuery('.ev_ln_item label, .layerclick, .pages-items .item').on('click touchend',function(e){if(dragging){return;}
jQuery('body').css('overflow','auto');e.stopPropagation();e.preventDefault();var el=$(this).find('a');var url=el.attr("href");if(url){handleLayer(url);}});jQuery('#sorter').on('change',function(){jQuery('body').css('overflow','auto');var sortOrder=this.value;var currentUrl=window.location.href;var url=new URL(currentUrl);url.searchParams.set("product_list_order",sortOrder);var newUrl=url.href;if(url){handleLayer(newUrl);}});}
function handleLayer(url){var multi_filter=false;if(multi_filter){}
jQuery('.ev_ln_overlay').removeClass('ev_ln_overlay_open');jQuery('body').css('overflow','auto');window.scrollTo(0,0);var data='';data+='&isAjax=1';var tS=new Date().getTime();data+='&ts='+tS;ELEVATE.Spinner.getSpinner('.products-grid');ELEVATE.Spinner.getSpinner('.sidebar-main');jQuery('.toolbar-products').remove();jQuery.ajax({url:url,dataType:'json',type:'post',data:data,success:function(data){updateContent(data.html);data.html.total_column=data.html.products_list;if(self.options.enableHistory){saveState(url,'title',data.html);}},error:function(data){console.log(data);}});}
return{init:function(){init();},handlelayer:function(url){handleLayer(url);}};}());}(jQuery.noConflict(),window));